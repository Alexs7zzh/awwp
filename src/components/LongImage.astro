---
import { getEntry } from "astro:content";
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";
import TextInfo from "./TextInfo.astro";

interface Props {
  id: string;
  image: ImageMetadata;
}
const { id, image } = Astro.props;

const work = await getEntry("work", id);
if (!work) {
  throw new Error(`No work found by id ${id}`);
}
---

<article
  class="artwork-content long-image"
  aria-labelledby={`work-${work.id}-title}`}
>
  <Image
    src={image}
    alt={work.data.title}
    class="artwork-image"
    loading="lazy"
    format="webp"
  />
  <TextInfo
    id={work.id}
    title={work.data.title}
    description={work.data.intro}
  />
</article>

<style>
  .artwork-content {
    display: flex;
    align-items: flex-start;
    width: 100%;
    margin-bottom: 30vh;
  }

  .artwork-image {
    width: 70%;
    flex-shrink: 0;
    height: auto;
    display: block;
  }

  @media (max-width: 767px) {
    .artwork-content {
      flex-direction: column;
      margin-bottom: 25vh;
    }
    .artwork-image {
      width: 100% !important; /* Override inline style */
    }
  }
</style>
